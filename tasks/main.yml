---
# tasks file for snowagent
#
- name: Snowagent | Create Directories
  ansible.builtin.file:
    path: /opt/snow
    state: directory
    owner: root
    group: root
    mode: 0755

- name: Snowagent | Install Agent RHEL
  ansible.builtin.dnf:
    name: "{{ snowagent_baseurl }}unibe_snowagent-{{ snowagent_version }}.x86_64.rpm"
    disable_gpg_check: yes
  when: ansible_os_family == 'RedHat'

- name: Snowagent | Install Agent DEB
  ansible.builtin.apt:
    deb: "{{ snowagent_baseurl }}unibe_snowagent_{{ snowagent_version }}_amd64.deb"
    force: yes
  when: ansible_os_family == 'Debian'

- name: Snowagent | Copy configfile
  ansible.builtin.template:
    src: snowagent.config.j2
    dest: /opt/snow/snowagent.config
    owner: root
    group: root
    mode: 0640
